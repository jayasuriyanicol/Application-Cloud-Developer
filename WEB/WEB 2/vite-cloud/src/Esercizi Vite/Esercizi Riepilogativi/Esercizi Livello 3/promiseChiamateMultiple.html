<!-- 29. Promise.all per Chiamate Multiple
Richiesto: ottenere post e commenti contemporaneamente.
Usare: Promise.all.
Risultato: dati aggregati visibili insieme. -->

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chiamate Multiple - Promise All</title>
</head>
<body>

    <b><p>POST</p></b>
    <br>
    <ul id="post"></ul>

    <br>
    <b><p>UTENTI</p></b>
    <br>
    <ul id="utenti"></ul>

    <br>
    <b><p>COMMENTI</p></b>
    <br>
    <ul id="commenti"></ul>

    


    <script>


        let listaPost = document.getElementById("post");
        let listaUtenti = document.getElementById("utenti");
        let listaCommenti = document.getElementById("commenti");


        promisePost = fetch("https://jsonplaceholder.typicode.com/posts")
           .then((ris) => ris.json());

        promiseUtenti = fetch("https://jsonplaceholder.typicode.com/users")
            .then((ris) => ris.json());

        promiseCommenti = fetch("https://jsonplaceholder.typicode.com/comments")
            .then((ris) => ris.json());



        Promise.all([promisePost,promiseUtenti,promiseCommenti]) 
        
            .then((ris) =>{

                for(post of ris[0]){

                    let riga = document.createElement("li");

                    riga.innerHTML = post.title;

                    listaPost.append(riga);
                }


                for(utente of ris[1]){

                    let riga = document.createElement("li");
                    riga.innerHTML = utente.name;
                    
                    listaUtenti.append(riga);

                }


                for(commento of ris[2]){


                    let riga = document.createElement("li");

                    riga.innerHTML = commento.name;

                    listaCommenti.append(riga)
                }
                
            
           })

        
    </script>



    
</body>
</html>